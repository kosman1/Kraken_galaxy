{"tests": [{"data": {"status": "failure", "inputs": {"input1": {"src": "hda", "id": "2891970512fa2d5a"}}, "output_problems": ["Job in error state.", "Job in error state."], "job": {"inputs": {"input1": {"src": "hda", "id": "2891970512fa2d5a"}}, "update_time": "2015-02-28T03:45:11.068366", "tool_id": "kraken", "outputs": {"output1": {"src": "hda", "id": "5729865256bc2525"}}, "stdout": "", "command_line": null, "exit_code": null, "state": "error", "create_time": "2015-02-28T03:45:08.398305", "params": {"chromInfo": "\"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/tool-data/shared/ucsc/chrom/hg17.len\"", "dbkey": "\"hg17\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": null, "id": "5729865256bc2525", "user_email": "test@bx.psu.edu"}, "problem_log": "Traceback (most recent call last):\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 331, in run\n    testMethod()\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/test/functional/test_toolbox.py\", line 268, in test_tool\n    self.do_it( td )\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/test/functional/test_toolbox.py\", line 67, in do_it\n    raise e\nJobOutputsError: Job in error state.\nJob in error state.\n-------------------- >> begin captured stdout << ---------------------\nHistory with id 2891970512fa2d5a in error - summary of datasets in error below.\n--------------------------------------\n| 2 - Classify with kraken on data 1 (HID - NAME) \n| Dataset Blurb:\n|  tool error\n| Dataset Info:\n|  failure preparing job\n| Dataset Job Standard Output:\n|  *Standard output was empty.*\n| Dataset Job Standard Error:\n|  *Standard error was empty.*\n|\n--------------------------------------\nHistory with id 2891970512fa2d5a in error - summary of datasets in error below.\n--------------------------------------\n| 2 - Classify with kraken on data 1 (HID - NAME) \n| Dataset Blurb:\n|  tool error\n| Dataset Info:\n|  failure preparing job\n| Dataset Job Standard Output:\n|  *Standard output was empty.*\n| Dataset Job Standard Error:\n|  *Standard error was empty.*\n|\n--------------------------------------\n\n--------------------- >> end captured stdout << ----------------------\n-------------------- >> begin captured logging << --------------------\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.web.framework.webapp: INFO: Session authenticated using Galaxy master api key\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/users?key=test_key HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.web.framework.webapp: INFO: Session authenticated using Galaxy master api key\nrequests.packages.urllib3.connectionpool: DEBUG: \"POST /api/users HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.web.framework.webapp: INFO: Session authenticated using Galaxy master api key\nrequests.packages.urllib3.connectionpool: DEBUG: \"POST /api/users/2891970512fa2d5a/api_key HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"POST /api/histories HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.tools.actions.upload_common: INFO: tool upload1 created job id 1\nrequests.packages.urllib3.connectionpool: DEBUG: \"POST /api/tools HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.jobs: DEBUG: (1) Working directory for job is: /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1\ngalaxy.jobs.handler: DEBUG: (1) Dispatching to local runner\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.jobs: DEBUG: (1) Persisting job destination (destination id: local:///)\ngalaxy.jobs.handler: INFO: (1) Job dispatched\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.jobs.runners: DEBUG: (1) command is: python /Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/tools/data_source/upload.py /Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/tmp/tmplMcQCS /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/tmp/tmp7AE4dh 1:/var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/dataset_1_files:/var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/files/000/dataset_1.dat; return_code=$?; cd /Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central; /Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/set_metadata.sh /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/files /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1 . /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpF5S9uc/functional_tests_wsgi.ini /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/tmp/tmplMcQCS /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/galaxy.json /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/metadata_in_HistoryDatasetAssociation_1_MeELDx,/var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/metadata_kwds_HistoryDatasetAssociation_1_iVscmT,/var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/metadata_out_HistoryDatasetAssociation_1_J_s3g_,/var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/metadata_results_HistoryDatasetAssociation_1_Z8LEHQ,,/var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/metadata_override_HistoryDatasetAssociation_1_uHknl_; sh -c \"exit $return_code\"\ngalaxy.jobs.runners.local: DEBUG: (1) executing job script: /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/galaxy_1.sh\ngalaxy.jobs: DEBUG: (1) Persisting job destination (destination id: local:///)\ngalaxy.jobs.runners.local: DEBUG: execution finished: /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/1/galaxy_1.sh\ngalaxy.datatypes.metadata: DEBUG: loading metadata from file for: HistoryDatasetAssociation 1\ngalaxy.jobs: DEBUG: job 1 ended\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"POST /api/tools HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\ngalaxy.jobs: DEBUG: (2) Working directory for job is: /var/folders/hq/_3xgzwv97s74p51r3r_gz5700000gn/T/tmpo7MqNb/job_working_directory/000/2\ngalaxy.jobs.handler: DEBUG: (2) Dispatching to local runner\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/jobs/5729865256bc2525?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\ngalaxy.jobs: DEBUG: (2) Persisting job destination (destination id: local:///)\ngalaxy.jobs.handler: INFO: (2) Job dispatched\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/jobs/5729865256bc2525?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\ngalaxy.jobs.runners: ERROR: (2) Failure preparing job\nTraceback (most recent call last):\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/lib/galaxy/jobs/runners/__init__.py\", line 158, in prepare_job\n    job_wrapper.prepare()\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/lib/galaxy/jobs/__init__.py\", line 840, in prepare\n    self.command_line, self.extra_filenames = tool_evaluator.build()\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/lib/galaxy/tools/evaluation.py\", line 408, in build\n    self.__build_command_line( )\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/lib/galaxy/tools/evaluation.py\", line 424, in __build_command_line\n    command_line = fill_template( command, context=param_dict )\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/lib/galaxy/util/template.py\", line 9, in fill_template\n    return str( Template( source=template_text, searchList=[context] ) )\n  File \"/Users/nturaga/Documents/galaxyproject/galaxy-test2/galaxy-central/eggs/Cheetah-2.2.2-py2.7-macosx-10.6-intel-ucs2.egg/Cheetah/Template.py\", line 1004, in __str__\n    return getattr(self, mainMethName)()\n  File \"cheetah_DynamicallyCompiledCheetahTemplate_1425095110_83_15631.py\", line 83, in respond\nNotFound: cannot find 'DBNAME'\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/jobs/5729865256bc2525?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a/contents?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a/contents/5729865256bc2525?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a/contents/5729865256bc2525/provenance?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/jobs/5729865256bc2525?full=true&key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/jobs/5729865256bc2525?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a/contents?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a/contents/5729865256bc2525?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/histories/2891970512fa2d5a/contents/5729865256bc2525/provenance?key=b5e36c65385d2ccfe69a8283cb53c462 HTTP/1.1\" 200 None\n--------------------- >> end captured logging << ---------------------\n", "problem_type": "functional.test_toolbox.JobOutputsError"}, "id": "functional.test_toolbox.TestForTool_kraken.test_tool_000000", "has_data": true}], "version": "0.1", "summary": {"num_skips": 0, "num_errors": 0, "num_failures": 1, "num_tests": 1}}